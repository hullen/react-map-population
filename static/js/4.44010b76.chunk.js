(this["webpackJsonpreact-map-population"]=this["webpackJsonpreact-map-population"]||[]).push([[4],{63:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return c}));var n=a(67),r=a.n(n).a.create({baseURL:"https://api.mocki.io/v1/dfd64349"});function l(){return r.get("/properties")}function c(e){return r.post("/properties/register",e)}},94:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return b}));var n=a(0),r=a.n(n),l=a(1),c=a(21),i=a(62),u=a(92),m=a(15),s=a(63),o=m.d.Marker,d=m.c.Main;function p(){var e=Object(l.f)(),t=Object(n.useState)(),a=Object(i.a)(t,2),c=a[0],p=a[1],E=Object(n.useState)(),b=Object(i.a)(E,2),h=b[0],f=b[1],g=Object(u.a)({mode:"onChange",nativeValidation:!0}),j=g.errors,O=g.register,y=g.handleSubmit,k=g.setValue,v=(0,g.watch)(),N=v.latitude,C=v.longitude,q=Object(n.useMemo)((function(){return C&&N&&{lng:C,lat:N}}),[N,C]),R=Object(n.useCallback)((function(t){p(!0),Object(s.a)(t).then((function(){e.push("/admin")})).catch((function(e){p(!1),console.log("e",e)}))}),[e]),w=Object(n.useCallback)((function(e){k("latitude",e.lat),k("longitude",e.lng)}),[k]),S=Object(n.useCallback)((function(e){var t=e.lngLat;w(t)}),[w]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null,r.a.createElement("div",{style:{width:"30%",marginRight:"5%"}},r.a.createElement(m.b,{onSubmit:y(R)},r.a.createElement("h1",null,"Register new"),r.a.createElement("label",{htmlFor:"zipcode"},"Zip Code",r.a.createElement("br",null),r.a.createElement("input",{id:"zipcode",name:"zipcode",type:"text",className:j.zipcode&&"error",ref:O({required:!0})}),j.zipcode&&r.a.createElement("span",{className:"error"},"This is required")),r.a.createElement("label",{htmlFor:"number"},"Number",r.a.createElement("br",null),r.a.createElement("input",{id:"number",name:"number",type:"text",className:j.number&&"error",ref:O({required:!0})}),j.number&&r.a.createElement("span",{className:"error"},"This is required")),r.a.createElement("label",{htmlFor:"latitude"},"Latitude",r.a.createElement("br",null),r.a.createElement("input",{id:"latitude",name:"latitude",placeholder:"Click on the map",title:"Click on the map",type:"text",pattern:"[0-9]*",className:j.latitude&&"error",ref:O({required:!0}),readOnly:!0}),j.latitude&&r.a.createElement("span",{className:"error"},"This is required, just click on the map")),r.a.createElement("label",{htmlFor:"longitude"},"Longitude",r.a.createElement("br",null),r.a.createElement("input",{id:"longitude",name:"longitude",placeholder:"Click on the map",title:"Click on the map",type:"text",pattern:"[0-9]*",className:j.longitude&&"error",ref:O({required:!0}),readOnly:!0}),j.longitude&&r.a.createElement("span",{className:"error"},"This is required, just click on the map")),r.a.createElement("label",{htmlFor:"residents"},"Residents",r.a.createElement("br",null),r.a.createElement("input",{id:"residents",name:"residents",type:"number",pattern:"[0-9]*",className:j.residents&&"error",ref:O({required:!0})}),j.residents&&r.a.createElement("span",{className:"error"},"This is required")),r.a.createElement(m.a,{type:"primary",htmlType:"submit",isLoading:c},"Register"))),r.a.createElement("div",{style:{width:"50%",height:"100%"}},r.a.createElement(m.d,{onClick:S,setMapRef:f}),q&&r.a.createElement(o,{center:q,map:h,draggable:!0,onDragEnd:w}))))}function E(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],l=t[1],u=Object(n.useState)([]),o=Object(i.a)(u,2),d=o[0],p=o[1];return Object(n.useEffect)((function(){Object(s.b)().then((function(e){var t=e.data||[];p(t)})).catch((function(){})).finally((function(){return l(!1)}))}),[]),a?null:r.a.createElement(c.Main,null,r.a.createElement("div",{style:{width:"60%"}},r.a.createElement("p",null,r.a.createElement("strong",null,"Total:")," ",d.length),r.a.createElement(m.f,{type:"striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Zipcode"),r.a.createElement("th",{scope:"col"},"Number"),r.a.createElement("th",{scope:"col"},"Residents"))),r.a.createElement("tbody",null,d.map((function(e){var t=e.id,a=e.zipcode,n=e.number,l=e.residents;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,l))}))))))}function b(){var e=Object(l.h)(),t=e.path,a=e.url,i=Object(n.useMemo)((function(){return[{to:a,name:"List"},{to:"".concat(a,"/register"),name:"Register"}]}),[a]);return r.a.createElement(c.Container,null,r.a.createElement(c.Sider,null,r.a.createElement(c.Nav,{items:i})),r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:t},r.a.createElement(E,null)),r.a.createElement(l.a,{path:"".concat(t,"/register")},r.a.createElement(p,null))))}}}]);
//# sourceMappingURL=4.44010b76.chunk.js.map