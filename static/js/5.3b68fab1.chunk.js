(this["webpackJsonpreact-map-population"]=this["webpackJsonpreact-map-population"]||[]).push([[5],{63:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return c}));var n=r(67),o=r.n(n).a.create({baseURL:"https://hullen.free.beeceptor.com/map-population"});function a(){return o.get("/properties")}function c(e){return o.post("/properties",e)}},93:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return k}));var n=r(62),o=r(0),a=r.n(o),c=r(63),i=r(66);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=r(14);var l=r(15),f=r(8),d=r.n(f);function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=25;return{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[r,-1*(e-t+r)],"bottom-right":[-r,-1*(e-t+r)],left:[t,-1*(e-t)],right:[-t,-1*(e-t)]}}var b={height:30,radius:0};function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b,a=Object(o.useMemo)((function(){return p(p({},b),n)}),[n]);return Object(o.useEffect)((function(){var n,o,c;return e&&Array.isArray(t)&&t.length>0&&r.U&&(o=r.U.clickLayer(t,(function(e){var t=e.features[0]||{},o={offset:m(a.height,a.radius)};n=new d.a.Popup(o);var c=t.geometry.coordinates,i=t.properties,u=i.residents,p=i.number,s=i.zipcode;n&&n.setLngLat(c).setHTML("\n            <strong>PROPERTY INFO</strong><br />\n            <strong>Residents:</strong> ".concat(u,"<br />\n            <strong>Number:</strong> ").concat(p,"<br />\n            <strong>ZipCode:</strong> ").concat(s,"<br />\n            <br />\n            <strong>Longitude:</strong> ").concat(c[0],"<br />\n            <strong>Latitude:</strong> ").concat(c[1],"\n            ")).addTo(r)})),c=r.U.hoverPointer(t)),function(){e&&Array.isArray(t)&&t.length>0&&(t.forEach((function(e,t){o[t](),c[t]()})),n&&(n.remove(),n=null))}}),[r,a,t,e]),null}var g="property_points-source";var y="heat_map-source";var v={heatmap:function(e){var t=e.dataSource,r=e.map;return h("heat",["property-point"],r,{height:15}),Object(o.useEffect)((function(){return r.addSource(y,{type:"geojson",data:t}),r.addLayer({id:"property-heat",type:"heatmap",source:y,maxzoom:15,paint:{"heatmap-weight":{property:"residents",type:"exponential",stops:[[1,0],[30,7]]},"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(209,229,240,0)",.1,"#ffffb2",.3,"#feb24c",.5,"#fd8d3c",.7,"#fc4e2a",1,"#e31a1c"],"heatmap-radius":{stops:[[11,25],[15,50]]},"heatmap-opacity":{default:1,stops:[[14,1],[15,0]]}}},"waterway-label"),r.addLayer({id:"property-point",type:"circle",source:y,minzoom:14,paint:{"circle-color":["interpolate",["linear"],["get","residents"],1,"#ffffff",2,"#ffffb2",3,"#feb24c",4,"#fc4e2a",5,"#e31a1c",6,"#630636",7,"#350363"],"circle-stroke-color":"white","circle-stroke-width":0,"circle-radius":{property:"residents",type:"exponential",stops:[[{zoom:15,value:1},5],[{zoom:15,value:7},10],[{zoom:22,value:1},20],[{zoom:22,value:7},50]]},"circle-opacity":{stops:[[14,0],[15,1]]}}},"waterway-label"),function(){r.U.removeSource(y),r.U.removeLayer(["property-heat","property-point"])}}),[t,r]),null},marker:function(e){var t=e.dataSource,r=e.map;return h("marker",["property-symbol","property-text"],r,{height:15}),Object(o.useEffect)((function(){return r.U.addGeoJSON(g,void 0,{promoteId:"id"}),r.U.addSymbol("property-symbol",g,{"icon-image":"property-icon","icon-ignore-placement":!0,"icon-offset":[0,-5],"icon-size":.7}),r.U.addSymbol("property-text",g,{"icon-image":"property-icon","icon-size":.9,"icon-offset":[0,-5],"text-field":["format",["upcase",["get","title"]],{"font-scale":1},"\n ZipCode: ",{},["concat",["get","zipcode"]],{"font-scale":.9}],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-offset":[0,1.5],"text-anchor":"top","text-size":11,"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5,"text-color":"#0257ac",minzoom:14}),function(){r.U.removeSource(g)}}),[r]),Object(o.useEffect)((function(){t&&r.U.setData(g,t)}),[t,r.U]),null}};function O(e){var t=e.type,r=e.dataSource,n=void 0===r?[]:r,o=e.map,c=v[t||"heatmap"];return a.a.createElement(c,{dataSource:n,map:o})}var j=r(3);function E(){var e=Object(j.a)(["\n  width: 100%;\n  height: auto;\n  margin: 30px;\n"]);return E=function(){return e},e}var w=r(4).b.div(E()),S=l.c.Container,x=l.c.Sider,P="heatmap",U="marker";function k(){var e=Object(o.useState)(!0),t=Object(n.a)(e,2),r=t[0],i=t[1],u=Object(o.useState)(),f=Object(n.a)(u,2),d=f[0],m=f[1],b=Object(o.useState)(),h=Object(n.a)(b,2),g=h[0],y=h[1],v=Object(o.useState)(P),j=Object(n.a)(v,2),E=j[0],k=j[1];return Object(o.useEffect)((function(){Object(c.b)().then((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map((function(e){var t=e.latitude,r=e.longitude,n=Object(s.a)(e,["latitude","longitude"]);return{type:"Feature",geometry:{type:"Point",coordinates:[r,t]},properties:p({title:"Residents ".concat(e.residents)},n)}}));return{type:"FeatureCollection",features:t}}(e.data||[]);y(t)})).catch((function(){})).finally((function(){return i(!1)}))}),[]),r?null:a.a.createElement(a.a.Fragment,null,a.a.createElement(l.e,{spinning:r},a.a.createElement(S,null,a.a.createElement(x,null,a.a.createElement("h3",null,"Change View"),a.a.createElement(l.a,{active:E===P||void 0,onClick:function(){return k(P)},style:{marginBottom:10}},"Heatmap"),a.a.createElement(l.a,{active:E===U||void 0,onClick:function(){return k(U)}},"Markers")),a.a.createElement(w,null,d&&a.a.createElement(O,{type:E,dataSource:g,map:d}),a.a.createElement(l.d,{setMapRef:m})))))}}}]);
//# sourceMappingURL=5.3b68fab1.chunk.js.map